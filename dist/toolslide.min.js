!function(t,e){void 0===t&&void 0!==window&&(t=window),"function"==typeof define&&define.amd?define([],function(){return t.toolslide=e()}):"object"==typeof module&&module.exports?module.exports=e():t.toolslide=e()}(this,function(){"use strict";var i={position:"left",height:"100%",width:"25%",startOpen:!0,closeable:!0,minClosedSize:0,toggleButton:"",embed:!1,navigationItemWidth:"50px",navigationItemHeight:"50px",navigationOffsetX:"0px",navigationOffsetY:"0px",autoclose:!1,autocloseDelay:5e3,clickOutsideToClose:!0,animations:{replace:"crossfade 0.5s ease-in-out",toggle:"slide 0.5s ease"}};function n(){this.init.apply(this,arguments)}return n.prototype={init:function(t,e){if(this.config=Object.assign({},i,e),!t)throw new Error("Missing required attribute: target element (css selector or DOM node) must be provided");if(this.__isString(t))this.targetElement=document.querySelector(t);else{if(!this.__isDOMElement(t))throw new Error("Incorrect type: target element must be DOM node or string css selector");this.targetElement=t}this.targetElement.classList.add("toolslide"),this.config.embed&&this.targetElement.parentElement.classList.add("ts-embed-container"),this.containerElement=this.targetElement.querySelector(".ts-container"),this.contentElement=this.targetElement.querySelector(".ts-content-container"),this.navElement=this.targetElement.querySelector(".ts-nav-container"),this.__applyConfig(this.config),this.__attachEventListeners()},setPosition:function(t){this.targetElement.classList.add("ts-"+t)},setHeight:function(t){this.targetElement.style.height=this.__getSizeString(t),"bottom"===this.config.position?this.containerElement.style.height="calc(100% + "+this.__getSizeString(this.navElement.clientHeight)+")":"top"===this.config.position&&(this.containerElement.style.height="calc(100% - "+this.__getSizeString(this.navElement.clientHeight)+")")},setWidth:function(t){this.targetElement.style.width=this.__getSizeString(t),"left"===this.config.position?this.containerElement.style.width="calc(100% - "+this.__getSizeString(this.navElement.clientWidth)+")":"right"===this.config.position&&(this.containerElement.style.width="100%")},setNavigationSize:function(t,e){"left"!==this.config.position&&"right"!==this.config.position||(this.navElement.style.width=this.__getSizeString(t)),"top"!==this.config.position&&"bottom"!==this.config.position||(this.navElement.style.height=this.__getSizeString(e));for(var i=this.navElement.querySelectorAll(".ts-nav-item"),n=i.length;n--;)i[n].style.width=this.__getSizeString(t),i[n].style.height=this.__getSizeString(e)},setNavigationOffset:function(t,e){"left"===this.config.position?(this.navElement.style.left="calc("+this.__getSizeString(this.navElement.offsetLeft)+" + "+this.__getSizeString(t)+" - "+this.__getSizeString(this.navElement.offsetWidth)+" - "+this.__getSizeString(this.navElement.marginLeft)+")",this.navElement.style.top="calc("+this.__getSizeString(this.navElement.offsetTop)+" + "+this.__getSizeString(e)+")"):"right"===this.config.position?(this.navElement.style.left="calc("+this.__getSizeString(this.navElement.offsetLeft)+" + "+this.__getSizeString(t)+")",this.navElement.style.top="calc("+this.__getSizeString(this.navElement.offsetTop)+" + "+this.__getSizeString(e)+")"):"top"===this.config.position?(this.navElement.style.left="calc("+this.__getSizeString(this.navElement.offsetLeft)+" + "+this.__getSizeString(t)+")",this.navElement.style.top="calc("+this.__getSizeString(this.navElement.offsetTop)+" + "+this.__getSizeString(e)+" - "+this.__getSizeString(this.navElement.offsetHeight)+" - "+this.__getSizeString(this.navElement.marginTop)+")"):"bottom"===this.config.position&&(this.navElement.style.left="calc("+this.__getSizeString(this.navElement.offsetLeft)+" + "+this.__getSizeString(t)+")",this.navElement.style.top="calc("+this.__getSizeString(this.navElement.offsetTop)+" + "+this.__getSizeString(e)+")")},setAutoClose:function(t){this.autocloseTimeout&&clearTimeout(this.autocloseTimeout),this.autocloseTimeout=setTimeout(this.close.bind(this),t)},setActiveById:function(t){var e,i=this.targetElement.querySelector(".ts-content-item.active");if(this.__isDOMElement(t))e=t.id;else{if(!this.__isString(t))return;e=t}i&&e===i.id||(this.fire("beforeToggle",[i,void 0]),t=this.targetElement.querySelector(".ts-nav-item[ts-target='"+e+"']"),e=this.targetElement.querySelector("#"+e),this.__deactivateAll(),e&&e.classList.add("active"),t&&t.classList.add("active"),this.fire("afterToggle",[i,e]))},setActiveByIndex:function(t){var e=this.contentElement&&this.contentElement.children;this.setActiveById(e[t]&&e[t].id)},open:function(){this.fire("beforeOpen",[this.targetElement]),this.targetElement.classList.remove("closed"),this.targetElement.classList.add("open"),this.containerElement.style.left="",this.__updateEmbeding(),this.fire("afterOpen",[this.targetElement])},close:function(){this.fire("beforeClose",[this.targetElement]),this.targetElement.classList.remove("open"),this.targetElement.classList.add("closed"),this.containerElement.style.left=this.__getSizeString(this.config.minClosedSize),this.__updateEmbeding(),this.fire("afterClose",[this.targetElement])},isOpen:function(){return this.targetElement.classList.contains("open")},isActive:function(t){if(this.__isString(t))t=document.getElementById(t);else if(!this.__isDOMElement(t))return!1;return t.classList.contains("active")},__applyConfig:function(t){this.setPosition(t.position),t.startOpen?this.open():this.close(),this.setNavigationSize(t.navigationItemWidth,t.navigationItemHeight),this.setWidth(t.width),this.setHeight(t.height),this.setNavigationOffset(t.navigationOffsetX,t.navigationOffsetY),this.__updateEmbeding(),t.autoclose&&this.setAutoClose(),this.__setAnimations(t.animations),"number"==typeof this.config.activePanel?this.setActiveByIndex(this.config.activePanel):this.setActiveById(this.config.activePanel||this.__getContentPanel(0))},__attachEventListeners:function(){for(var t=this.navElement.children,e=t.length;e--;)t[e].onclick=this.onNavButtonClick.bind(this);this.autocloseTimeout&&(this.containerElement.onmouseover=this.onMouseOver.bind(this),this.containerElement.onmouseout=this.onMouseOut.bind(this)),this.config.clickOutsideToClose&&document.addEventListener("click",this.onDocumentClick.bind(this),!1),this.config.toggleButton&&(this.toggleButtonElement=this.__isDOMElement(this.config.toggleButton)?this.config.toggleButton:document.querySelector(this.config.toggleButton),this.toggleButtonElement)&&(this.toggleButtonElement.onclick=this.onToggleButtonClick.bind(this))},__updateEmbeding:function(){var t,e,i,n,s;this.config.embed&&(t=this.__getSizeString(this.config.width),e=this.__getSizeString(this.config.height),i=this.__getSizeString(this.config.navigationItemWidth),n=this.__getSizeString(this.config.navigationItemHeight),s=this.__getSizeString(this.config.minClosedSize),"left"===this.config.position?this.targetElement.parentElement.style.marginLeft=this.isOpen()?"calc("+t+" - "+i+")":s:"right"===this.config.position?(this.targetElement.parentElement.style.marginRight=this.isOpen()?"calc("+t+" - "+i+")":s,this.targetElement.parentElement.style.marginLeft=this.isOpen()?"calc(-"+t+" + "+i+")":s):"top"===this.config.position?this.targetElement.parentElement.style.marginTop=this.isOpen()?"calc("+e+" - "+n+")":s:"bottom"===this.config.position&&(this.targetElement.parentElement.style.marginBottom=this.isOpen()?"calc("+e+" - "+n+")":s))},__setAnimations:function(t){if(t&&Object.keys(t).length){if(t.replace)for(var e="object"==typeof t.replace&&null!==t.replace?t.replace:this.__getAnimationFromString(t.replace),i=this.contentElement.children,n=i.length;n--;)this.__setVendorStyleProperty(i[n],"transition",this.__getTransitionFromAnimation(e)),i[n].classList.add(e.type);t.toggle&&(e="object"==typeof t.replace&&null!==t.replace?t.toggle:this.__getAnimationFromString(t.toggle),this.__setVendorStyleProperty(this.targetElement,"transition",this.__getTransitionFromAnimation(e)))}},onNavButtonClick:function(t){this.isOpen()?this.isActive(t.currentTarget)&&this.config.closeable&&this.close():this.open(),this.setActiveById(t.currentTarget.getAttribute("ts-target"))},onMouseOver:function(t){clearTimeout(this.autocloseTimeout)},onMouseOut:function(t){this.setAutoClose(this.config.autocloseDelay)},onDocumentClick:function(t){this.targetElement.contains(t.target)||this.toggleButtonElement&&this.toggleButtonElement.contains(t.target)||this.close()},onToggleButtonClick:function(t){this.isOpen()?this.close():this.open()},fire:function(t,e){this.config.listeners&&this.config.listeners[t]&&this.config.listeners[t].apply(this,e)},__deactivateAll:function(){for(var t=this.contentElement&&this.contentElement.children,e=this.navElement&&this.navElement.children,i=t.length,n=e.length;i--;)t[i].classList.remove("active");for(;n--;)e[n].classList.remove("active")},__getContentPanel:function(t){return this.contentElement&&this.contentElement.children&&this.contentElement.children[t]},__isDOMElement:function(t){return t&&(t.nodeType===document.ELEMENT_NODE||t.nodeType===document.DOCUMENT_FRAGMENT_NODE)},__isString:function(t){return"string"==typeof t},__getAnimationFromString:function(t){t=t.split(" ");return{type:t[0],speed:t[1],easing:t[2]}},__getTransitionFromAnimation:function(t){var e="";return"slide"===t.type?e+="transform "+t.speed+" "+t.easing:"crossfade"===t.type?e+="opacity "+t.speed+" "+t.easing:"slidefade"===t.type&&(e=(e+="opacity "+t.speed+" "+t.easing+", ")+"transform "+t.speed+" "+t.easing),e},__setVendorStyleProperty:function(t,e,i){var n=this.__capitalizeFirstLetter(e);t.style["webkit"+n]=i,t.style["Moz"+n]=i,t.style["ms"+n]=i,t.style["O"+n]=i,t.style[e]=i},__capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},__getSizeString:function(t){return t+("number"==typeof t?"px":"")}},function(t,e){return new n(t,e)}});